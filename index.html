
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…ÙŠ Ø¨Ø¨Ø³Ø§Ø·Ø©   </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„Ø¬Ø³Ù… ÙˆØ§Ù„Ø®Ø·ÙˆØ· ÙˆØ§Ù„Ø®Ù„ÙÙŠØ© */
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #f0f4f8;
            overflow-x: hidden;
            margin: 0;
            padding: 0;
            color: #333; /* Ù„ÙˆÙ† Ù†Øµ Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ù„Ø¬Ø³Ù… */
        }

        /* Ø­Ø§ÙˆÙŠØ© Ø¹Ø±Ø¶ Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        .slideshow-container {
            position: relative;
            height: 100vh; /* Ø§Ø±ØªÙØ§Ø¹ ÙƒØ§Ù…Ù„ Ù„Ù„Ø´Ø§Ø´Ø© */
            width: 100%;
            overflow: hidden;
            background-color: #000; /* Ø®Ù„ÙÙŠØ© Ø³ÙˆØ¯Ø§Ø¡ Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù„Ù„Ø´Ø±Ø§Ø¦Ø­ */
        }

        /* Ù†Ù…Ø· Ø§Ù„Ø´Ø±ÙŠØ­Ø© Ø§Ù„ÙØ±Ø¯ÙŠØ© */
        .slide {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0; /* Ù…Ø®ÙÙŠØ© ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white; /* Ù„ÙˆÙ† Ø§Ù„Ù†Øµ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ù„Ø´Ø±Ø§Ø¦Ø­ */
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7); /* Ø¸Ù„ Ù„Ù„Ù†Øµ Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© */
            /* Ø£Ù†Ù…Ø§Ø· Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù„Ù„Ø®Ù„ÙÙŠØ© Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯Ù‡Ø§ */
            background-size: cover;
            background-position: center;
            transition: all 1s ease-in-out; /* Ø§Ù†ØªÙ‚Ø§Ù„ Ø³Ù„Ø³ Ù„Ù„Ø´ÙØ§ÙÙŠØ© ÙˆØ§Ù„ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰ */
        }

        /* Ù†Ù…Ø· Ø§Ù„Ø´Ø±ÙŠØ­Ø© Ø§Ù„Ù†Ø´Ø·Ø© */
        .slide.active {
            opacity: 1; /* Ù…Ø±Ø¦ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„ØªÙ†Ø´ÙŠØ· */
            z-index: 1; /* Ù„Ø¬Ø¹Ù„ Ø§Ù„Ø´Ø±ÙŠØ­Ø© Ø§Ù„Ù†Ø´Ø·Ø© ÙÙˆÙ‚ Ø§Ù„Ø£Ø®Ø±Ù‰ */
        }

        /* Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù…Ø¤Ø«Ø±Ø§Øª Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ÙŠØ© */
        .slide.fade-in {
            animation: fadeIn 1s forwards;
        }
        .slide.fade-out {
            animation: fadeOut 1s forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        .slide.slide-left {
            transform: translateX(100%);
        }
        .slide.active.slide-left {
            animation: slideInLeft 1s forwards;
        }
        @keyframes slideInLeft {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .slide.slide-right {
            transform: translateX(-100%);
        }
        .slide.active.slide-right {
            animation: slideInRight 1s forwards;
        }
        @keyframes slideInRight {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .slide.zoom-in {
            transform: scale(0.5);
            opacity: 0;
        }
        .slide.active.zoom-in {
            animation: zoomIn 1s forwards;
        }
        @keyframes zoomIn {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .slide.rotate-in {
            transform: rotateY(90deg);
            opacity: 0;
        }
        .slide.active.rotate-in {
            animation: rotateIn 1s forwards;
        }
        @keyframes rotateIn {
            from { transform: rotateY(90deg); opacity: 0; }
            to { transform: rotateY(0deg); opacity: 1; }
        }

        /* Ù†Ù…Ø· Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ù„Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ */
        .prev, .next {
            cursor: pointer;
            position: absolute;
            top: 50%;
            width: auto;
            padding: 16px;
            margin-top: -22px;
            color: white;
            font-weight: bold;
            font-size: 18px;
            transition: 0.6s ease;
            border-radius: 0 3px 3px 0;
            user-select: none;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 10;
        }

        .next {
            right: 0;
            border-radius: 3px 0 0 3px;
        }

        .prev {
           left: 0;
            border-radius: 3px 0 0 3px;
        }

        .prev:hover, .next:hover {
            background-color: rgba(0, 0, 0, 0.8);
        }

        /* Ù†Ù…Ø· Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª (Ø§Ù„Ù†Ù‚Ø§Ø·) */
        .dots-container {
            text-align: center;
            position: absolute;
            bottom: 20px;
            width: 100%;
            z-index: 10;
        }

        .dot {
            cursor: pointer;
            height: 15px;
            width: 15px;
            margin: 0 2px;
            background-color: #bbb;
            border-radius: 50%;
            display: inline-block;
            transition: background-color 0.6s ease;
        }

        .dot.active, .dot:hover {
            background-color: #717171;
        }

        /* Ø£Ù†Ù…Ø§Ø· Ø®Ø§ØµØ© Ù„Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ */
        .slide.text-slide {
            background-color: rgba(0, 0, 0, 0.6); /* Ø®Ù„ÙÙŠØ© Ø¯Ø§ÙƒÙ†Ø© Ù„Ù„Ù†ØµÙˆØµ */
            padding: 20px;
            text-align: center;
        }

        .slide.text-slide h2 {
            font-size: 3em;
            margin-bottom: 20px;
        }

        .slide.text-slide p {
            font-size: 1.5em;
        }

        .slide.student-slide {
            flex-direction: column;
            text-align: center;
            justify-content: center; /* ØªÙˆØ³ÙŠØ· Ø¹Ù…ÙˆØ¯ÙŠ */
            align-items: center; /* ØªÙˆØ³ÙŠØ· Ø£ÙÙ‚ÙŠ */
            background-color: rgba(0, 0, 0, 0.6); /* Ø®Ù„ÙÙŠØ© Ø¯Ø§ÙƒÙ†Ø© Ù„Ù„Ø·Ø§Ù„Ø¨ */
        }

        /* Ø§Ù„ØµÙˆØ±Ø© Ù†ÙØ³Ù‡Ø§ Ø¯Ø§Ø®Ù„ Ø´Ø±ÙŠØ­Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ */
        .slide.student-slide img {
            display: block; /* Ù„Ø¬Ø¹Ù„Ù‡Ø§ ØªØ£Ø®Ø° Ù…Ø³Ø§Ø­Ø© Ø®Ø§ØµØ© Ø¨Ù‡Ø§ */
            margin: 0 auto 20px auto; /* ØªÙˆØ³ÙŠØ· Ø§Ù„ØµÙˆØ±Ø© Ù…Ø¹ Ù‡Ø§Ù…Ø´ Ø³ÙÙ„ÙŠ */
            border: 5px solid white; /* Ø¥Ø·Ø§Ø± Ø£Ø¨ÙŠØ¶ Ø­ÙˆÙ„ Ø§Ù„ØµÙˆØ±Ø© */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4); /* Ø¸Ù„ Ø®ÙÙŠÙ */
        }

        /* Ù†Ù…Ø· Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø¯Ø§Ø¦Ø±ÙŠØ© Ù„Ù„Ø·Ø§Ù„Ø¨ */
        .student-image.circle {
            border-radius: 50%;
            width: 250px; /* Ø­Ø¬Ù… Ø«Ø§Ø¨Øª Ù„Ù„Ø¯Ø§Ø¦Ø±Ø© */
            height: 250px; /* Ø­Ø¬Ù… Ø«Ø§Ø¨Øª Ù„Ù„Ø¯Ø§Ø¦Ø±Ø© */
            object-fit: cover; /* Ù„Ø¶Ù…Ø§Ù† Ù…Ù„Ø¡ Ø§Ù„ØµÙˆØ±Ø© Ù„Ù„Ø¯Ø§Ø¦Ø±Ø© */
        }

        /* Ù†Ù…Ø· Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø³ØªØ·ÙŠÙ„Ø© Ù„Ù„Ø·Ø§Ù„Ø¨ (4*6 ØªÙ‚Ø±ÙŠØ¨ÙŠ) */
        .student-image.rectangle {
            width: 250px; /* Ø¹Ø±Ø¶ ØªÙ‚Ø¯ÙŠØ±ÙŠ */
            height: 375px; /* Ø§Ø±ØªÙØ§Ø¹ ØªÙ‚Ø¯ÙŠØ±ÙŠ Ù„Ù†Ø³Ø¨Ø© 4:6 (Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¹Ø±Ø¶ 250ØŒ Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ 250 * 1.5 = 375) */
            object-fit: cover; /* Ù„Ø¶Ù…Ø§Ù† Ù…Ù„Ø¡ Ø§Ù„ØµÙˆØ±Ø© Ù„Ù„Ù…Ø³ØªØ·ÙŠÙ„ */
        }

.slide.image-slide {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background-color: rgba(0, 0, 0, 0.6); /* Ø®Ù„ÙÙŠØ© Ø®Ù„Ù Ø§Ù„ØµÙˆØ±Ø© */
    padding: 20px; /* Ù…Ø³Ø§ÙØ© Ø­ÙˆÙ„ Ø§Ù„ØµÙˆØ±Ø© Ù„Ø¸Ù‡ÙˆØ± Ø§Ù„Ø®Ù„ÙÙŠØ© */
}

.slide.image-slide img {
    max-width: 60%; /* âœ… Ø¹Ø±Ø¶ Ø£Ù‚ØµÙ‰ 60% */
    max-height: 60vh; /* âœ… Ø§Ø±ØªÙØ§Ø¹ Ø£Ù‚ØµÙ‰ 60% Ù…Ù† Ø§Ù„Ø´Ø§Ø´Ø© */
    height: auto;
    border: 5px solid white;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
    margin-bottom: 10px;
}

.slide.image-slide .image-title {
    font-size: 2em;
    color: white;
    margin-bottom: 10px;
    text-align: center;
}

.slide.image-slide .image-caption {
    position: absolute;
    bottom: 50px;
    background-color: rgba(0, 0, 0, 0.7);
    padding: 10px 20px;
    border-radius: 5px;
    font-size: 1.2em;
    color: white;
}
        /* Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª */
        .settings-panel {
            position: fixed;
            top: 0;
            left: 0;
            width: 350px; /* Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¹Ø±Ø¶ */
            height: 100vh;
            background-color: #2d3748; /* Ø®Ù„ÙÙŠØ© Ø¯Ø§ÙƒÙ†Ø© Ù„Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… */
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.4);
            padding: 20px;
            overflow-y: auto;
            z-index: 20;
            transform: translateX(-100%);
            transition: transform 0.3s ease-in-out;
            color: #e2e8f0; /* Ù„ÙˆÙ† Ù†Øµ ÙØ§ØªØ­ */
        }

        .settings-panel.open {
            transform: translateX(0);
        }

        .settings-toggle-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 21;
            background-color: #4a5568; /* Ù„ÙˆÙ† Ø²Ø± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª */
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            transition: background-color 0.2s ease;
        }

        .settings-toggle-btn:hover {
            background-color: #2d3748;
        }

        .settings-panel label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #cbd5e0; /* Ù„ÙˆÙ† Ù†Øµ Ø§Ù„ØªØ³Ù…ÙŠØ© */
        }

        .settings-panel input[type="text"],
        .settings-panel input[type="number"],
        .settings-panel textarea,
        .settings-panel select,
        .settings-panel input[type="color"] {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #4a5568; /* Ø­Ø¯ÙˆØ¯ Ø£ØºÙ…Ù‚ Ù‚Ù„ÙŠÙ„Ø§Ù‹ */
            border-radius: 4px;
            box-sizing: border-box;
            background-color: #1a202c; /* Ø®Ù„ÙÙŠØ© Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
            color: #e2e8f0; /* Ù„ÙˆÙ† Ù†Øµ Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
        }

        .settings-panel input[type="file"] {
            color: #cbd5e0;
        }

        .settings-panel button {
            background-color: #4299e1; /* Ù„ÙˆÙ† Ø£Ø²Ø±Ù‚ Ù…ÙˆØ­Ø¯ Ù„Ù„Ø£Ø²Ø±Ø§Ø± */
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
            transition: background-color 0.2s ease;
        }

        .settings-panel button:hover {
            background-color: #3182ce;
        }

        /* Ø£Ù„ÙˆØ§Ù† Ù…Ø®ØµØµØ© Ù„Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
        .settings-panel button.bg-green-600 { background-color: #38a169; }
        .settings-panel button.bg-green-600:hover { background-color: #2f855a; }
        .settings-panel button.bg-indigo-600 { background-color: #667eea; }
        .settings-panel button.bg-indigo-600:hover { background-color: #5a67d8; }
        .settings-panel button.bg-purple-600 { background-color: #805ad5; }
        .settings-panel button.bg-purple-600:hover { background-color: #6b46c1; }
        .settings-panel button.bg-orange-600 { background-color: #ed8936; }
        .settings-panel button.bg-orange-600:hover { background-color: #dd6b20; }
        .settings-panel button.bg-blue-500 { background-color: #4299e1; }
        .settings-panel button.bg-blue-500:hover { background-color: #3182ce; }
        .settings-panel button.bg-gray-500 { background-color: #a0aec0; }
        .settings-panel button.bg-gray-500:hover { background-color: #718096; }
        .settings-panel button.bg-teal-600 { background-color: #319795; }
        .settings-panel button.bg-teal-600:hover { background-color: #2c7a7b; }
        .settings-panel button.bg-yellow-600 { background-color: #d69e2e; }
        .settings-panel button.bg-yellow-600:hover { background-color: #b7791f; }
        .settings-panel button.bg-red-600 { background-color: #e53e3e; }
        .settings-panel button.bg-red-600:hover { background-color: #c53030; }


        .slides-list {
            margin-top: 20px;
            border-top: 1px solid #4a5568;
            padding-top: 10px;
        }

        .slides-list div {
            background-color: #1a202c; /* Ø®Ù„ÙÙŠØ© Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© */
            padding: 8px;
            margin-bottom: 5px;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9em;
            color: #e2e8f0;
            border: 1px solid #4a5568;
        }

        .slides-list .slide-item-content {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-grow: 1;
        }

        .slides-list .slide-thumbnail {
            width: 40px;
            height: 40px;
            object-fit: cover;
            border-radius: 4px;
            border: 1px solid #667eea;
        }
        .slides-list .slide-thumbnail.circle {
            border-radius: 50%;
        }

        .slides-list .slide-controls button {
            width: auto;
            margin-left: 5px;
            padding: 5px 8px;
            background-color: #c53030; /* Ù„ÙˆÙ† Ø§Ù„Ø­Ø°Ù */
            font-size: 0.8em;
        }
        .slides-list .slide-controls button.move-btn {
            background-color: #4299e1; /* Ù„ÙˆÙ† Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù†Ù‚Ù„ */
        }
        .slides-list .slide-controls button:hover {
            opacity: 0.8;
        }


        .message-box {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            z-index: 100;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            font-size: 0.9em;
        }

        .message-box.show {
            opacity: 1;
        }

        .image-preview {
            max-width: 100%;
            max-height: 150px;
            display: block;
            margin-top: 10px;
            border: 1px solid #4a5568;
            border-radius: 4px;
        }

        /* Ø§Ù„ØªØ°ÙŠÙŠÙ„ */
        .footer {
            position: fixed;
            bottom: 0;
            width: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 0;
            text-align: center;
            font-size: 1em;
            z-index: 15;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Ø£Ù„ÙˆØ§Ù† Ø£Ù‚Ø³Ø§Ù… Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© */
        .settings-panel .p-3.border.rounded-lg {
            background-color: #1a202c; /* Ø®Ù„ÙÙŠØ© Ø¯Ø§Ø®Ù„ÙŠØ© Ù„Ù„Ù‚Ø³Ù… */
            border-color: #4a5568; /* Ø­Ø¯ÙˆØ¯ Ø§Ù„Ù‚Ø³Ù… */
        }
        .settings-panel .p-3.border.rounded-lg h3 {
            color: #cbd5e0; /* Ù„ÙˆÙ† Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚Ø³Ù… */
        }
        .settings-panel .p-3.border.rounded-lg label {
            color: #a0aec0; /* Ù„ÙˆÙ† Ø§Ù„ØªØ³Ù…ÙŠØ§Øª Ø¯Ø§Ø®Ù„ Ø§Ù„Ù‚Ø³Ù… */
        }
        .settings-panel .p-3.border.rounded-lg input,
        .settings-panel .p-3.border.rounded-lg textarea,
        .settings-panel .p-3.border.rounded-lg select {
            background-color: #2d3748; /* Ø®Ù„ÙÙŠØ© Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù‚Ø³Ù… */
            color: #e2e8f0;
            border-color: #4a5568;
        }
        .settings-panel .p-3.border.rounded-lg input[type="file"] {
            color: #a0aec0;
        }
        .settings-panel .p-3.border.rounded-lg button {
            background-color: #4299e1;
            color: white;
        }

        .slideshow-container {
    background-color: #000; /* Ø®Ù„ÙÙŠØ© Ø³ÙˆØ¯Ø§Ø¡ Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù„Ù„Ø´Ø±Ø§Ø¦Ø­ */
}

/* flip-horizontal */
.flip-horizontal {
    transform: rotateY(180deg);
    opacity: 0;
}
.flip-horizontal.active {
    animation: flipHorizontal 1s forwards;
}
@keyframes flipHorizontal {
    from { transform: rotateY(180deg); opacity: 0; }
    to { transform: rotateY(0); opacity: 1; }
}

/* flip-vertical */
.flip-vertical {
    transform: rotateX(180deg);
    opacity: 0;
}
.flip-vertical.active {
    animation: flipVertical 1s forwards;
}
@keyframes flipVertical {
    from { transform: rotateX(180deg); opacity: 0; }
    to { transform: rotateX(0); opacity: 1; }
}

/* bounce-in */
.bounce-in {
    transform: scale(0.3);
    opacity: 0;
}
.bounce-in.active {
    animation: bounceIn 1s forwards;
}
@keyframes bounceIn {
    0% { transform: scale(0.3); opacity: 0; }
    50% { transform: scale(1.1); opacity: 1; }
    70% { transform: scale(0.9); }
    100% { transform: scale(1); opacity: 1; }
}

/* blur-in */
.blur-in {
    filter: blur(10px);
    opacity: 0;
}
.blur-in.active {
    animation: blurIn 1s forwards;
}
@keyframes blurIn {
    from { filter: blur(10px); opacity: 0; }
    to { filter: blur(0); opacity: 1; }
}

/* rotate-scale-in */
.rotate-scale-in {
    transform: rotate(-360deg) scale(0);
    opacity: 0;
}
.rotate-scale-in.active {
    animation: rotateScaleIn 1s forwards;
}
@keyframes rotateScaleIn {
    from { transform: rotate(-360deg) scale(0); opacity: 0; }
    to { transform: rotate(0) scale(1); opacity: 1; }
}
 </style>
</head>
<body>
    <div class="slideshow-container" id="slideshowContainer"></div>
    <div class="footer" id="mainFooter"></div>

    <div class="settings-toggle-btn" id="settingsToggleBtn">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</div>

    <div class="settings-panel" id="settingsPanel">
        <h2 class="text-2xl font-bold mb-4 text-gray-100">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø±Ø¶</h2>

        <!-- Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¹Ø§Ù…Ø© -->
        <div class="mb-4 p-3 border rounded-lg">
            <h3 class="font-semibold text-lg mb-2">Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¹Ø§Ù…Ø©</h3>
            <label for="backgroundImageUrlInput">Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„Ø®Ù„ÙÙŠØ©:</label>
            <input type="text" id="backgroundImageUrlInput" placeholder="Ø£Ùˆ Ø§Ø±ÙØ¹ Ù…Ù„ÙØ§Ù‹">
            <input type="file" id="backgroundFileInput" accept="image/*" class="mt-2 text-sm">
            <img id="backgroundPreview" class="image-preview" style="display: none;">
            <button id="updateBackgroundBtn" class="bg-green-600 hover:bg-green-700">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ù„ÙÙŠØ©</button>
        </div>

        <!-- Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙŠØ­Ø© Ø·Ø§Ù„Ø¨ -->
        <div class="mb-4 p-3 border rounded-lg">
            <h3 class="font-semibold text-lg mb-2">Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙŠØ­Ø© Ø·Ø§Ù„Ø¨</h3>
            <label for="studentNameInput">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨:</label>
            <input type="text" id="studentNameInput" placeholder="Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨">
            <label for="studentCommentInput">ØªØ¹Ù„ÙŠÙ‚:</label>
            <textarea id="studentCommentInput" placeholder="ØªÙ‡Ø§Ù†ÙŠÙ†Ø§ Ø¹Ù„Ù‰ ØªØ®Ø±Ø¬Ù‡!"></textarea>
            <label for="studentImageUrlInput">Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„Ø·Ø§Ù„Ø¨:</label>
            <input type="text" id="studentImageUrlInput" placeholder="Ø£Ùˆ Ø§Ø±ÙØ¹ Ù…Ù„ÙØ§Ù‹">
            <input type="file" id="studentFileInput" accept="image/*" class="mt-2 text-sm">
            <img id="studentPreview" class="image-preview" style="display: none;">
            <label for="studentImageShapeInput">Ø´ÙƒÙ„ Ø§Ù„ØµÙˆØ±Ø©:</label>
            <select id="studentImageShapeInput" class="text-sm">
                <option value="circle">Ø¯Ø§Ø¦Ø±Ø© (ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ¬Ù‡)</option>
                <option value="rectangle">Ù…Ø³ØªØ·ÙŠÙ„ (Ù…Ø«Ø§Ù„: 4x6)</option>
            </select>
            <button id="addStudentBtn" class="bg-indigo-600 hover:bg-indigo-700">Ø¥Ø¶Ø§ÙØ© Ø·Ø§Ù„Ø¨</button>
        </div>

        <!-- Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙŠØ­Ø© Ù†ØµÙŠØ© -->
        <div class="mb-4 p-3 border rounded-lg">
            <h3 class="font-semibold text-lg mb-2">Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙŠØ­Ø© Ù†ØµÙŠØ©</h3>
            <label for="textTitleInput">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</label>
            <input type="text" id="textTitleInput" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø´Ø±ÙŠØ­Ø©">
            <label for="textCommentInput">Ø§Ù„Ù†Øµ:</label>
            <textarea id="textCommentInput" placeholder="Ù†Øµ Ø§Ù„Ø´Ø±ÙŠØ­Ø©"></textarea>
            <button id="addTextSlideBtn" class="bg-purple-600 hover:bg-purple-700">Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙŠØ­Ø© Ù†ØµÙŠØ©</button>
        </div>

        <!-- Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙŠØ­Ø© ØµÙˆØ± Ø¹Ø§Ù…Ø© -->
        <div class="mb-4 p-3 border rounded-lg">
            <h3 class="font-semibold text-lg mb-2">Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙŠØ­Ø© ØµÙˆØ± Ø¹Ø§Ù…Ø©</h3>
            <label for="imageUrlInput">Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©:</label>
            <input type="text" id="imageUrlInput" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©">
            <input type="file" id="imageFileInput" accept="image/*" class="mt-2 text-sm">
            <img id="imagePreview" class="image-preview" style="display: none;">
            <label for="imageCaptionInput">ÙˆØµÙ Ø§Ù„ØµÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):</label>
            <input type="text" id="imageCaptionInput" placeholder="ÙˆØµÙ Ù‚ØµÙŠØ± Ù„Ù„ØµÙˆØ±Ø©">
            <label for="imageTitleInput">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØµÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):</label>
            <input type="text" id="imageTitleInput" placeholder="Ø¹Ù†ÙˆØ§Ù† ÙŠØ¸Ù‡Ø± Ø£Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø©">
            <button id="addImageBtn" class="bg-orange-600 hover:bg-orange-700">Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø©</button>
        </div>

        <!-- Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„Ø®Ù„ÙÙŠØ© -->
        <div class="mb-4 p-3 border rounded-lg">
            <h3 class="font-semibold text-lg mb-2">Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„Ø®Ù„ÙÙŠØ©</h3>
            <label for="backgroundMusicUrl">Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„ØµÙˆØªÙŠØ© (MP3/WAV):</label>
            <input type="text" id="backgroundMusicUrl" placeholder="Ø£Ùˆ Ø§Ø±ÙØ¹ Ù…Ù„ÙØ§Ù‹">
            <input type="file" id="backgroundMusicFileInput" accept="audio/*" class="mt-2 text-sm">
            <div class="flex items-center gap-2 mt-2">
                <label for="musicVolume">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµÙˆØª:</label>
                <input type="range" id="musicVolume" min="0" max="1" step="0.01" value="0.5" class="flex-grow">
                <span id="volumeValue" class="text-sm">50%</span>
            </div>
            <div class="flex gap-2 mt-2">
                <button id="playMusicBtn" class="flex-1 bg-blue-500 hover:bg-blue-600">ØªØ´ØºÙŠÙ„</button>
                <button id="pauseMusicBtn" class="flex-1 bg-gray-500 hover:bg-gray-600">Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª</button>
            </div>
            <audio id="backgroundMusic" loop></audio>
        </div>

        <!-- Ø§Ù„ØªØ°ÙŠÙŠÙ„ -->
        <div class="mb-4 p-3 border rounded-lg">
            <h3 class="font-semibold text-lg mb-2">Ø§Ù„ØªØ°ÙŠÙŠÙ„ (Ø§Ù„Ù‚Ø¯Ù…)</h3>
            <label for="footerTextInput">Ù†Øµ Ø§Ù„ØªØ°ÙŠÙŠÙ„:</label>
            <input type="text" id="footerTextInput" placeholder="Ù…Ø«Ø§Ù„: Ø­ÙÙ„Ø© ØªØ®Ø±Ø¬ Ø§Ù„Ø¯ÙØ¹Ø© 2024">
            <label for="footerTextColorInput">Ù„ÙˆÙ† Ù†Øµ Ø§Ù„ØªØ°ÙŠÙŠÙ„:</label>
            <input type="color" id="footerTextColorInput" value="#FFFFFF">
            <label for="footerBgColorInput">Ù„ÙˆÙ† Ø®Ù„ÙÙŠØ© Ø§Ù„ØªØ°ÙŠÙŠÙ„:</label>
            <input type="color" id="footerBgColorInput" value="#000000">
            <button id="updateFooterBtn" class="bg-teal-600 hover:bg-teal-700">ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ°ÙŠÙŠÙ„</button>
        </div>
        <!-- Ø­Ù‚Ù„ ØªØ­Ø±ÙŠØ± Ø§Ù„Ø´Ø±ÙŠØ­Ø© -->
<input type="hidden" id="editIndex" value="">

        <!-- Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ -->
        <div class="mb-4 p-3 border rounded-lg">
            <h3 class="font-semibold text-lg mb-2">Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø´Ø±Ø§Ø¦Ø­</h3>
            <label for="slideDurationInput">Ù…Ø¯Ø© Ø¹Ø±Ø¶ Ø§Ù„Ø´Ø±ÙŠØ­Ø© (Ø«ÙˆØ§Ù†ÙŠ):</label>
            <input type="number" id="slideDurationInput" value="5" min="1" class="mt-1 mb-2">

            <p class="text-sm text-gray-400 mt-2">
                ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ ØªØ£Ø«ÙŠØ± ÙƒÙ„ Ø´Ø±ÙŠØ­Ø© Ø¹Ù„Ù‰ Ø­Ø¯Ø© Ù…Ù† Ø®Ù„Ø§Ù„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ£Ø«ÙŠØ±Ø§Øª ÙÙŠ ÙƒÙ„ Ø´Ø±ÙŠØ­Ø©.
            </p>
        </div>

        <!-- Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…ÙŠ -->
        <div class="mb-4 p-3 border rounded-lg">
            <h3 class="font-semibold text-lg mb-2 text-gray-200">Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…ÙŠ</h3>
            <button id="startSlideshowBtn" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded w-full mb-2">Ø¨Ø¯Ø¡ Ø§Ù„Ø¹Ø±Ø¶</button>
            <button id="stopSlideshowBtn" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded w-full">Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¹Ø±Ø¶</button>
        </div>

        <!-- Ø§Ù„Ø­ÙØ¸ ÙˆØ§Ù„ØªØ­Ù…ÙŠÙ„ -->
        <button id="loadDefaultsBtn" class="bg-yellow-600 hover:bg-yellow-700">ØªØ­Ù…ÙŠÙ„ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©</button>
        <button id="clearAllBtn" class="bg-red-600 hover:bg-red-700">Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø´Ø±Ø§Ø¦Ø­</button>

        <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ -->
        <div class="slides-list" id="slidesList">
            <h3 class="font-semibold text-lg mb-2">Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ Ø§Ù„Ù…Ø¶Ø§ÙØ©:</h3>
        </div>

        <!-- ØªÙˆÙ„ÙŠØ¯ Ù†Ø³Ø®Ø© Ù†Ù‡Ø§Ø¦ÙŠØ© -->
        <div class="mb-4 p-3 border rounded-lg">
            <h3 class="font-semibold text-lg mb-2">ØªÙˆÙ„ÙŠØ¯ Ù†Ø³Ø®Ø© Ù†Ù‡Ø§Ø¦ÙŠØ©</h3>
            <button id="generateFinalBtn" class="bg-purple-600 hover:bg-purple-700 w-full">ØªÙˆÙ„ÙŠØ¯ Ù†Ø³Ø®Ø© Ø¨Ø¯ÙˆÙ† Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ…</button>
            <p class="text-sm text-gray-400 mt-2">Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ù…Ø³ØªÙ‚Ù„Ø© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø§Ù„ÙŠ ÙÙ‚Ø·</p>
        </div>

        <!-- Ø­ÙØ¸ ÙˆØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù JSON -->
        <div class="flex flex-wrap justify-between gap-2 mt-4">
            <button id="exportSettingsBtn" class="bg-purple-600 hover:bg-purple-700 flex-grow">Ø­ÙØ¸ Ø§Ù„Ø¹Ø±Ø¶ (JSON)</button>
            <input type="file" id="loadFileInput" accept=".json" class="hidden">
            <button id="loadFromFileBtn" class="bg-teal-600 hover:bg-teal-700 flex-grow">ØªØ­Ù…ÙŠÙ„ Ù…Ù† Ù…Ù„Ù (JSON)</button>
        </div>

    </div> <!-- Ù†Ù‡Ø§ÙŠØ© settings-panel -->

    <!-- Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ -->
    <div class="message-box" id="messageBox"></div>
</body>

    <script>
        const slideshowContainer = document.getElementById('slideshowContainer');
        const settingsToggleBtn = document.getElementById('settingsToggleBtn');
        const settingsPanel = document.getElementById('settingsPanel');
        const startSlideshowBtn = document.getElementById('startSlideshowBtn');
        const stopSlideshowBtn = document.getElementById('stopSlideshowBtn');

        // Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø·Ù„Ø§Ø¨
        const studentNameInput = document.getElementById('studentNameInput');
        const studentCommentInput = document.getElementById('studentCommentInput');
        const studentImageUrlInput = document.getElementById('studentImageUrlInput');
        const studentFileInput = document.getElementById('studentFileInput');
        const studentPreview = document.getElementById('studentPreview');
        const studentImageShapeInput = document.getElementById('studentImageShapeInput');
        const addStudentBtn = document.getElementById('addStudentBtn');

        // Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù†ØµÙˆØµ
        const textTitleInput = document.getElementById('textTitleInput');
        const textCommentInput = document.getElementById('textCommentInput');
        const addTextSlideBtn = document.getElementById('addTextSlideBtn');

        // Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ØµÙˆØ± Ø§Ù„Ø¹Ø§Ù…Ø©
        const imageUrlInput = document.getElementById('imageUrlInput');
        const imageFileInput = document.getElementById('imageFileInput');
        const imagePreview = document.getElementById('imagePreview');
        const imageCaptionInput = document.getElementById('imageCaptionInput');
        const imageTitleInput = document.getElementById('imageTitleInput');
        const addImageBtn = document.getElementById('addImageBtn');

        // Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù…Ø¯Ø© ÙˆØ§Ù„Ø­ÙØ¸
        const slideDurationInput = document.getElementById('slideDurationInput');
        const loadDefaultsBtn = document.getElementById('loadDefaultsBtn');
        const clearAllBtn = document.getElementById('clearAllBtn');
        // Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØµØ¯ÙŠØ± ÙˆØ§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯
// Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø­ÙØ¸ ÙˆØ§Ù„ØªØ­Ù…ÙŠÙ„ Ù…Ù† Ù…Ù„Ù
        const exportSettingsBtn = document.getElementById('exportSettingsBtn');
        const loadFileInput = document.getElementById('loadFileInput'); // ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù‡Ø°Ø§ loadFileInput
        const loadFromFileBtn = document.getElementById('loadFromFileBtn'); // ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù‡Ø°Ø§ loadFromFileBtn
        const slidesList = document.getElementById('slidesList');
        const messageBox = document.getElementById('messageBox');
        

        // Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¹Ø§Ù…Ø©
        const backgroundImageUrlInput = document.getElementById('backgroundImageUrlInput');
        const backgroundFileInput = document.getElementById('backgroundFileInput');
        const backgroundPreview = document.getElementById('backgroundPreview');
        const updateBackgroundBtn = document.getElementById('updateBackgroundBtn');

        // Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰
        const backgroundMusicElement = document.getElementById('backgroundMusic');
        const backgroundMusicUrlInput = document.getElementById('backgroundMusicUrl');
        const backgroundMusicFileInput = document.getElementById('backgroundMusicFileInput');
        const musicVolumeControl = document.getElementById('musicVolume');
        const volumeValue = document.getElementById('volumeValue');
        const playMusicBtn = document.getElementById('playMusicBtn');
        const pauseMusicBtn = document.getElementById('pauseMusicBtn');

        // Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ØªØ°ÙŠÙŠÙ„
        const mainFooter = document.getElementById('mainFooter');
        const footerTextInput = document.getElementById('footerTextInput');
        const footerTextColorInput = document.getElementById('footerTextColorInput');
        const footerBgColorInput = document.getElementById('footerBgColorInput');
        const updateFooterBtn = document.getElementById('updateFooterBtn');

        let slides = [];
        let currentSlideIndex = 0;
        let slideshowInterval;
        let slideDuration = 5000; // 5 Ø«ÙˆØ§Ù†ÙŠ Ø§ÙØªØ±Ø§Ø¶ÙŠØ©

const allTransitionEffects = [
    'fade-in',
    'slide-left',
    'slide-right',
    'zoom-in',
    'rotate-in',
    'flip-horizontal',
    'flip-vertical',
    'bounce-in',
    'blur-in',
    'rotate-scale-in'
];


        // ÙˆØ¸Ø§Ø¦Ù Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
        function displayMessage(message, isError = false) {
            messageBox.textContent = message;
            messageBox.style.backgroundColor = isError ? 'rgba(220, 53, 69, 0.8)' : 'rgba(0, 0, 0, 0.8)';
            messageBox.classList.add('show');
            setTimeout(() => {
                messageBox.classList.remove('show');
            }, 3000);
        }

     // ÙˆØ¸ÙŠÙØ© Ù„ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø´Ø±Ø§Ø¦Ø­
        function clearEditMode() {
    document.getElementById('editIndex').value = '';
}

        // ÙˆØ¸ÙŠÙØ© Ù„Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø© Ø¥Ù„Ù‰ Ø³Ù„Ø§ÙŠØ¯
        function addImage(imageUrl, caption = '', title = '') {
            slides.push({
                type: 'image',
                imageUrl: imageUrl,
                caption: caption,
                title: title,
                effect: selectedTransitionEffects[0] // ØªØ¹ÙŠÙŠÙ† Ø£ÙˆÙ„ Ù…Ø¤Ø«Ø± Ø§ÙØªØ±Ø§Ø¶ÙŠÙ‹Ø§
            });
            updateSlidesList();
            displayMessage('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙŠØ­Ø© ØµÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­.');
        }

        // ÙˆØ¸ÙŠÙØ© Ù„Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙŠØ­Ø© Ø·Ø§Ù„Ø¨
        function addStudent(name, comment, imageUrl, imageShape) {
            slides.push({
                type: 'student',
                name: name,
                comment: comment,
                imageUrl: imageUrl,
                imageShape: imageShape,
                effect: selectedTransitionEffects[0] // ØªØ¹ÙŠÙŠÙ† Ø£ÙˆÙ„ Ù…Ø¤Ø«Ø± Ø§ÙØªØ±Ø§Ø¶ÙŠÙ‹Ø§
            });
            updateSlidesList();
            displayMessage('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙŠØ­Ø© Ø·Ø§Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­.');
        }

        // ÙˆØ¸ÙŠÙØ© Ù„Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙŠØ­Ø© Ù†ØµÙŠØ©
        function addTextSlide(title, comment) {
            slides.push({
                type: 'text',
                title: title,
                comment: comment,
                effect: selectedTransitionEffects[0] // ØªØ¹ÙŠÙŠÙ† Ø£ÙˆÙ„ Ù…Ø¤Ø«Ø± Ø§ÙØªØ±Ø§Ø¶ÙŠÙ‹Ø§
            });
            updateSlidesList();
            displayMessage('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙŠØ­Ø© Ù†ØµÙŠØ© Ø¨Ù†Ø¬Ø§Ø­.');
        }

        function stopSlideshow() {
            clearInterval(slideshowInterval);
        }
        
        // ÙˆØ¸ÙŠÙØ© Ø¹Ø±Ø¶ Ø§Ù„Ø´Ø±Ø§Ø¦Ø­
// ÙˆØ¸ÙŠÙØ© Ø¹Ø±Ø¶ Ø§Ù„Ø´Ø±Ø§Ø¦Ø­
function showSlide(index) {
    if (slides.length === 0) {
        slideshowContainer.innerHTML = '<div class="slide active flex flex-col justify-center items-center text-gray-400 text-2xl font-bold">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø´Ø±Ø§Ø¦Ø­ Ù„Ø¹Ø±Ø¶Ù‡Ø§. Ø£Ø¶Ù Ø´Ø±Ø§Ø¦Ø­ Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø£Ùˆ Ø­Ù…Ù„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©.</div>';
        // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙˆØ§Ù„Ù…Ø¤Ø´Ø±Ø§Øª
        document.querySelector('.prev')?.remove();
        document.querySelector('.next')?.remove();
        document.querySelector('.dots-container')?.remove();
        return;
    }

    // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
    const allSlides = document.querySelectorAll('.slide');
    allSlides.forEach(slide => {
        allTransitionEffects.forEach(effect => slide.classList.remove(effect));
        slide.classList.remove('active');
        slide.style.opacity = 0;
        slide.style.transform = 'none';
    });

    // Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø´Ø±ÙŠØ­Ø©
    slideshowContainer.innerHTML = '';

    const slideData = slides[index];
    const slideElement = document.createElement('div');
    slideElement.classList.add('slide');

    // Ø®Ù„ÙÙŠØ© Ø¹Ø§Ù…Ø© Ø¥Ù† ÙˆØ¬Ø¯Øª
    const storedSettings = JSON.parse(localStorage.getItem('slideshowSettings'));
    if (storedSettings && storedSettings.backgroundImageUrl) {
        slideElement.style.backgroundImage = `url('${storedSettings.backgroundImageUrl}')`;
    }

    // Ø¨Ù†Ø§Ø¡ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø´Ø±ÙŠØ­Ø©
    if (slideData.type === 'student') {
        slideElement.classList.add('student-slide');
        const studentImage = document.createElement('img');
        studentImage.src = slideData.imageUrl;
        studentImage.alt = slideData.name;
        studentImage.classList.add('student-image', slideData.imageShape);
        slideElement.appendChild(studentImage);

        const studentInfo = document.createElement('div');
        studentInfo.classList.add('student-info', 'p-4', 'bg-black/50', 'rounded-lg', 'mt-4');
        const studentName = document.createElement('h2');
        studentName.classList.add('text-4xl', 'font-bold', 'mb-2');
        studentName.textContent = slideData.name;
        const studentComment = document.createElement('p');
        studentComment.classList.add('text-xl');
        studentComment.textContent = slideData.comment;
        studentInfo.appendChild(studentName);
        studentInfo.appendChild(studentComment);
        slideElement.appendChild(studentInfo);

    } else if (slideData.type === 'text') {
        slideElement.classList.add('text-slide');
        const title = document.createElement('h2');
        title.textContent = slideData.title;
        const comment = document.createElement('p');
        comment.textContent = slideData.comment;
        slideElement.appendChild(title);
        slideElement.appendChild(comment);

} else if (slideData.type === 'image') {
    slideElement.classList.add('image-slide');

    // Ù„Ùˆ ÙÙŠÙ‡ title â†’ Ù†Ø¶Ø¹Ù‡ Ø®Ø§Ø±Ø¬ Ø§Ù„ØµÙˆØ±Ø©
    if (slideData.title) {
        const titleElement = document.createElement('div');
        titleElement.classList.add('image-title');
        titleElement.textContent = slideData.title;
        slideElement.appendChild(titleElement);
    }

    // Ø§Ù„ØµÙˆØ±Ø© Ù†ÙØ³Ù‡Ø§ Ø¯Ø§Ø®Ù„ Ø¥Ø·Ø§Ø±
    const imageElement = document.createElement('img');
    imageElement.src = slideData.imageUrl;
    imageElement.alt = slideData.title || 'ØµÙˆØ±Ø©';
    slideElement.appendChild(imageElement);

    // Ù„Ùˆ ÙÙŠÙ‡ caption â†’ Ù†Ø¶Ø¹Ù‡ Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© (Ø£Ø³ÙÙ„)
    if (slideData.caption) {
        const captionElement = document.createElement('div');
        captionElement.classList.add('image-caption');
        captionElement.textContent = slideData.caption;
        slideElement.appendChild(captionElement);
    }
}

    slideshowContainer.appendChild(slideElement);

    // â­ï¸ Ø¬Ø¯ÙŠØ¯ â€” ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø¤Ø«Ø± Ø§Ù„Ù…Ù†Ø§Ø³Ø¨
    let effectToApply = 'fade-in'; // Ø§ÙØªØ±Ø§Ø¶ÙŠ
    if (slideData.effect) {
        // Ù„Ùˆ Ø§Ù„Ø´Ø±ÙŠØ­Ø© Ù„Ù‡Ø§ ØªØ£Ø«ÙŠØ± Ù…Ø¹ÙŠÙ†
        effectToApply = slideData.effect;
    } else if (selectedTransitionEffects.length > 0) {
        // Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù…Ù† Ø§Ù„Ù…Ø¤Ø«Ø±Ø§Øª Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©
        effectToApply = selectedTransitionEffects[Math.floor(Math.random() * selectedTransitionEffects.length)];
    }

    // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø¤Ø«Ø±
    slideElement.classList.add('active', effectToApply);

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙˆØ§Ù„Ù†Ù‚Ø§Ø·
    updateNavigationControls();
}


        function testImage(url, callback) {
    const img = new Image();
    img.onload = function() { callback(true); };
    img.onerror = function() { callback(false); };
    img.src = url;
}

       // ÙˆØ¸ÙŠÙØ© Ù„Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø´Ø±ÙŠØ­Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©
        function nextSlide() {
            currentSlideIndex = (currentSlideIndex + 1) % slides.length;
            showSlide(currentSlideIndex);
        }

        // ÙˆØ¸ÙŠÙØ© Ù„Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø´Ø±ÙŠØ­Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
        function prevSlide() {
            currentSlideIndex = (currentSlideIndex - 1 + slides.length) % slides.length;
            showSlide(currentSlideIndex);
        }

        // ÙˆØ¸ÙŠÙØ© Ù„Ø¨Ø¯Ø¡ Ø¹Ø±Ø¶ Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
    function startSlideshow() {
    clearInterval(slideshowInterval);
    if (slides.length > 0) {
        slideDuration = parseInt(slideDurationInput.value) * 1000;
        slideshowInterval = setInterval(nextSlide, slideDuration);
        
        // ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ù…ØµØ¯Ø± ØµÙˆØª
        if (backgroundMusicElement.src) {
            backgroundMusicElement.currentTime = 0; // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ Ù…Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
            backgroundMusicElement.play()
                .then(() => console.log("Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ ØªØ¹Ù…Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹"))
                .catch(e => {
                    console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ:", e);
                    displayMessage('ÙŠØªØ·Ù„Ø¨ Ø§Ù„Ù…ØªØµÙØ­ ØªÙØ§Ø¹Ù„Ø§Ù‹ Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¹Ø±Ø¶ ', true);
                });
        }
    }
}

// ÙˆØ¸ÙŠÙØ© ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
function updateSlidesList() {
    slidesList.innerHTML = '<h3 class="font-semibold text-lg mb-2">Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ Ø§Ù„Ù…Ø¶Ø§ÙØ©:</h3>';
    
    if (slides.length === 0) {
        slidesList.innerHTML += '<p class="text-gray-400 text-sm">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø´Ø±Ø§Ø¦Ø­ Ù…Ø¶Ø§ÙØ© Ø¨Ø¹Ø¯.</p>';
    }

    slides.forEach((slide, index) => {
        const slideItem = document.createElement('div');
        let slideText = '';
        let thumbnailHtml = '';

        if (slide.type === 'student') {
            slideText = `Ø·Ø§Ù„Ø¨: ${slide.name}`;
            thumbnailHtml = `<img src="${slide.imageUrl}" alt="ØµÙˆØ±Ø© Ø§Ù„Ø·Ø§Ù„Ø¨" class="slide-thumbnail ${slide.imageShape}">`;
        } else if (slide.type === 'text') {
            slideText = `Ù†Øµ: ${slide.title || 'Ø´Ø±ÙŠØ­Ø© Ù†ØµÙŠØ©'}`;
            thumbnailHtml = `<span class="slide-thumbnail flex items-center justify-center bg-blue-700 text-white text-xs">Ù†Øµ</span>`;
        } else if (slide.type === 'image') {
            slideText = `ØµÙˆØ±Ø©: ${slide.caption || 'ØµÙˆØ±Ø© Ø¹Ø§Ù…Ø©'}`;
            thumbnailHtml = `<img src="${slide.imageUrl}" alt="ØµÙˆØ±Ø©" class="slide-thumbnail">`;
        }

        // â­ï¸ Ø¥Ø¶Ø§ÙØ© Ø§Ø³Ù… Ø§Ù„ØªØ£Ø«ÙŠØ±
        let effectName = slide.effect ? slide.effect : 'Ø¹Ø´ÙˆØ§Ø¦ÙŠ';
        slideText += ` (ØªØ£Ø«ÙŠØ±: ${effectName})`;

        slideItem.innerHTML = `
            <div class="slide-item-content">
                ${thumbnailHtml}
                <span>${index + 1}. ${slideText}</span>
            </div>
            <div class="slide-controls flex flex-col gap-1">
                <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø¤Ø«Ø± -->
                <select class="effect-selector text-sm px-1 py-1 rounded bg-gray-700 text-white" data-index="${index}" title="ØªØ£Ø«ÙŠØ± Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„">
                    <option value="">Ø¹Ø´ÙˆØ§Ø¦ÙŠ</option>
                    ${allTransitionEffects.map(effect => `
                        <option value="${effect}" ${slide.effect === effect ? 'selected' : ''}>${effect}</option>
                    `).join('')}
                </select>

                <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… -->
                <div class="flex gap-1 mt-1">
                    <button class="edit-btn bg-yellow-500 hover:bg-yellow-600" data-index="${index}" title="ØªØ­Ø±ÙŠØ± Ø§Ù„Ø´Ø±ÙŠØ­Ø©">âœï¸</button>
                    <button class="move-btn bg-blue-500 hover:bg-blue-600" data-index="${index}" data-direction="up" title="Ù†Ù‚Ù„ Ù„Ù„Ø£Ø¹Ù„Ù‰">â¬†ï¸</button>
                    <button class="move-btn bg-blue-500 hover:bg-blue-600" data-index="${index}" data-direction="down" title="Ù†Ù‚Ù„ Ù„Ù„Ø£Ø³ÙÙ„">â¬‡ï¸</button>
                    <button class="delete-btn bg-red-600 hover:bg-red-700" data-index="${index}" title="Ø­Ø°Ù Ø§Ù„Ø´Ø±ÙŠØ­Ø©">ğŸ—‘ï¸</button>
                </div>
            </div>
        `;

        slidesList.appendChild(slideItem);
    });

    // Ù…Ø³ØªÙ…Ø¹ Ø£Ø²Ø±Ø§Ø± ØªØ­Ø±ÙŠØ±
    slidesList.querySelectorAll('.edit-btn').forEach(button => {
        button.addEventListener('click', (e) => {
            const index = parseInt(e.target.dataset.index);
            const slide = slides[index];

            if (slide.type === 'student') {
                studentNameInput.value = slide.name;
                studentCommentInput.value = slide.comment;
                studentImageUrlInput.value = slide.imageUrl;
                studentImageShapeInput.value = slide.imageShape;
                studentPreview.src = slide.imageUrl;
                studentPreview.style.display = 'block';
            } else if (slide.type === 'text') {
                textTitleInput.value = slide.title;
                textCommentInput.value = slide.comment;
            } else if (slide.type === 'image') {
                imageUrlInput.value = slide.imageUrl;
                imageCaptionInput.value = slide.caption;
                imageTitleInput.value = slide.title;
                imagePreview.src = slide.imageUrl;
                imagePreview.style.display = 'block';
            }

            document.getElementById('editIndex').value = index;
            settingsPanel.classList.add('open');
            displayMessage(`Ø¬Ø§Ø±ÙŠ ØªØ­Ø±ÙŠØ± Ø§Ù„Ø´Ø±ÙŠØ­Ø© Ø±Ù‚Ù… ${index + 1}.`);
        });
    });

    // Ù…Ø³ØªÙ…Ø¹ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø­Ø°Ù / Ø§Ù„Ù†Ù‚Ù„
    slidesList.querySelectorAll('.delete-btn, .move-btn').forEach(button => {
        button.addEventListener('click', (e) => {
            const index = parseInt(e.target.dataset.index);

            if (e.target.classList.contains('delete-btn')) {
                slides.splice(index, 1);

                if (currentSlideIndex >= slides.length && slides.length > 0) {
                    currentSlideIndex = slides.length - 1;
                } else if (slides.length === 0) {
                    currentSlideIndex = 0;
                }

                updateSlidesList();
                showSlide(currentSlideIndex);
                displayMessage('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø´Ø±ÙŠØ­Ø©.');
            }
            else if (e.target.dataset.direction === 'up') {
                if (index > 0) {
                    [slides[index], slides[index - 1]] = [slides[index - 1], slides[index]];

                    if (currentSlideIndex === index) currentSlideIndex--;
                    else if (currentSlideIndex === index - 1) currentSlideIndex++;

                    updateSlidesList();
                    showSlide(currentSlideIndex);
                    displayMessage('ØªÙ… Ù†Ù‚Ù„ Ø§Ù„Ø´Ø±ÙŠØ­Ø© Ù„Ù„Ø£Ø¹Ù„Ù‰.');
                } else {
                    displayMessage('Ù‡Ø°Ù‡ Ø§Ù„Ø´Ø±ÙŠØ­Ø© Ø¨Ø§Ù„ÙØ¹Ù„ ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰.', true);
                }
            }
            else if (e.target.dataset.direction === 'down') {
                if (index < slides.length - 1) {
                    [slides[index], slides[index + 1]] = [slides[index + 1], slides[index]];

                    if (currentSlideIndex === index) currentSlideIndex++;
                    else if (currentSlideIndex === index + 1) currentSlideIndex--;

                    updateSlidesList();
                    showSlide(currentSlideIndex);
                    displayMessage('ØªÙ… Ù†Ù‚Ù„ Ø§Ù„Ø´Ø±ÙŠØ­Ø© Ù„Ù„Ø£Ø³ÙÙ„.');
                } else {
                    displayMessage('Ù‡Ø°Ù‡ Ø§Ù„Ø´Ø±ÙŠØ­Ø© Ø¨Ø§Ù„ÙØ¹Ù„ ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„.', true);
                }
            }
        });
    });

    // Ù…Ø³ØªÙ…Ø¹ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ£Ø«ÙŠØ±
    slidesList.querySelectorAll('.effect-selector').forEach(selector => {
        selector.addEventListener('change', (e) => {
            const index = parseInt(e.target.dataset.index);
            const selectedEffect = e.target.value || null;
            slides[index].effect = selectedEffect;
            displayMessage(`ØªÙ… ØªØ­Ø¯ÙŠØ« ØªØ£Ø«ÙŠØ± Ø§Ù„Ø´Ø±ÙŠØ­Ø© Ø±Ù‚Ù… ${index + 1} Ø¥Ù„Ù‰: ${selectedEffect || 'Ø¹Ø´ÙˆØ§Ø¦ÙŠ'}.`);
            showSlide(currentSlideIndex);
        });
    });
}

    
// â­ï¸ Ø¬Ø¯ÙŠØ¯ â€” Ù…Ø³ØªÙ…Ø¹ Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© (select)
    slidesList.querySelectorAll('.effect-selector').forEach(selector => {
        selector.addEventListener('change', (e) => {
            const index = parseInt(e.target.dataset.index);
            const selectedEffect = e.target.value || null;
            slides[index].effect = selectedEffect;
            displayMessage(`ØªÙ… ØªØ­Ø¯ÙŠØ« ØªØ£Ø«ÙŠØ± Ø§Ù„Ø´Ø±ÙŠØ­Ø© Ø±Ù‚Ù… ${index + 1} Ø¥Ù„Ù‰: ${selectedEffect || 'Ø¹Ø´ÙˆØ§Ø¦ÙŠ'}.`);
            showSlide(currentSlideIndex); // Ø¹Ø±Ø¶ Ù…Ø¨Ø§Ø´Ø± Ù„Ù„ØªØ£Ø«ÙŠØ±
        });
    });

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶ ÙˆØ§Ù„Ù…Ø¤Ù‚Øª
    showSlide(currentSlideIndex);
    startSlideshow();

function updateNavigationControls() {
    // â­ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª (Ø§Ù„Ù†Ù‚Ø§Ø·)
    let dotsContainer = document.querySelector('.dots-container');
    if (!dotsContainer) {
        dotsContainer = document.createElement('div');
        dotsContainer.classList.add('dots-container');
        slideshowContainer.appendChild(dotsContainer);
    }
    dotsContainer.innerHTML = ''; // Ù…Ø³Ø­ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©

    if (slides.length > 0) {
        for (let i = 0; i < slides.length; i++) {
            const dot = document.createElement('span');
            dot.classList.add('dot');
            if (i === currentSlideIndex) {
                dot.classList.add('active');
            }
            dot.addEventListener('click', () => {
                currentSlideIndex = i;
                showSlide(currentSlideIndex);
                // Ù„Ø§ Ù†Ø¹ÙŠØ¯ startSlideshow Ù‡Ù†Ø§ Ø­ØªÙ‰ Ù„Ø§ Ù†Ø¹ÙŠØ¯ Ø§Ù„Ù…Ø¤Ù‚Øª ÙƒÙ„ Ù…Ø±Ø©
            });
            dotsContainer.appendChild(dot);
        }
        dotsContainer.style.display = 'block';
    } else {
        dotsContainer.style.display = 'none';
    }

    // â­ Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„
    let prevBtn = document.querySelector('.prev');
    let nextBtn = document.querySelector('.next');

    if (slides.length > 1) {
        if (!prevBtn) {
            prevBtn = document.createElement('a');
            prevBtn.classList.add('prev');
            prevBtn.innerHTML = '&#10094;';
            prevBtn.addEventListener('click', () => {
                prevSlide();
                // Ù„Ø§ Ù†Ø¹ÙŠØ¯ startSlideshow Ù‡Ù†Ø§ â€” ÙŠØ¨Ù‚Ù‰ Ø§Ù„Ù…Ø¤Ù‚Øª ÙƒÙ…Ø§ Ù‡Ùˆ
            });
            slideshowContainer.appendChild(prevBtn);
        }
        if (!nextBtn) {
            nextBtn = document.createElement('a');
            nextBtn.classList.add('next');
            nextBtn.innerHTML = '&#10095;';
            nextBtn.addEventListener('click', () => {
                nextSlide();
                // Ù„Ø§ Ù†Ø¹ÙŠØ¯ startSlideshow Ù‡Ù†Ø§ â€” ÙŠØ¨Ù‚Ù‰ Ø§Ù„Ù…Ø¤Ù‚Øª ÙƒÙ…Ø§ Ù‡Ùˆ
            });
            slideshowContainer.appendChild(nextBtn);
        }
        prevBtn.style.display = 'block';
        nextBtn.style.display = 'block';
    } else {
        if (prevBtn) prevBtn.style.display = 'none';
        if (nextBtn) nextBtn.style.display = 'none';
    }
}

        // Ø¯Ø§Ù„Ø© Ù„ØªØµØ¯ÙŠØ± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª (Ø§Ù„Ø´Ø±Ø§Ø¦Ø­) Ø¥Ù„Ù‰ Ù…Ù„Ù JSON
// Ø¯Ø§Ù„Ø© Ù„Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ø¥Ù„Ù‰ Ù…Ù„Ù JSON ÙŠÙ…ÙƒÙ† ØªÙ†Ø²ÙŠÙ„Ù‡
            function saveSettingsToFile() {
    const settingsToSave = {
        slides: slides,
        background: {
            url: backgroundImageUrlInput.value,
        },
        music: {
            url: backgroundMusicUrlInput.value,
            volume: musicVolumeControl.value
        },
        footer: {
            text: footerTextInput.value,
            textColor: footerTextColorInput.value,
            bgColor: footerBgColorInput.value
        },
        currentSlideIndex: currentSlideIndex,
        slideDuration: slideDurationInput.value,
        transitionEffects: selectedTransitionEffects,
    };

    const dataStr = JSON.stringify(settingsToSave, null, 4);
    const blob = new Blob([dataStr], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'Ø¹Ø±Ø¶_Ø§Ù„Ù†Ø¬Ø§Ø­_Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª.json';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);

    displayMessage('ØªÙ… Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø±Ø¶ ÙƒÙ…Ù„Ù JSON.');
}

// ÙˆØ¸ÙŠÙØ© Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
function loadDefaultSettings() {
    slides = []; // Ù…Ø³Ø­ Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ Ø§Ù„Ø­Ø§Ù„ÙŠØ©

    // Ø¥Ø¶Ø§ÙØ© Ø®Ù„ÙÙŠØ© Ø§ÙØªØ±Ø§Ø¶ÙŠØ© (Ù…Ù„Ù Ù…Ø­Ù„ÙŠ)
    const defaultBackgroundFile = 'background.jpg'; // Ø§Ø³Ù… Ù…Ù„Ù Ø§Ù„Ø®Ù„ÙÙŠØ© ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù…Ø¬Ù„Ø¯
    backgroundImageUrlInput.value = defaultBackgroundFile;
    updateBackground();

    // Ø¥Ø¶Ø§ÙØ© Ù…Ù„Ù ØµÙˆØªÙŠ Ø§ÙØªØ±Ø§Ø¶ÙŠ (Ù…Ù„Ù Ù…Ø­Ù„ÙŠ)
    const defaultMusicFile = 'graduation.mp3'; // Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù Ø§Ù„ØµÙˆØªÙŠ ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù…Ø¬Ù„Ø¯
    backgroundMusicUrlInput.value = defaultMusicFile;
    backgroundMusicElement.src = defaultMusicFile;
    musicVolumeControl.value = 0.5;
    volumeValue.textContent = '50%';

    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ°ÙŠÙŠÙ„ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
    footerTextInput.value = 'Ù…ÙˆÙ‚Ø¹Ùƒ Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ø±Ø¶Ùƒ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…ÙŠ | Ø§ÙƒØªØ¨ Ù…Ø¯Ø±Ø³ØªÙƒ ÙˆØ§Ø³Ù…Ùƒ';
    footerTextColorInput.value = '#FFFFFF';
    footerBgColorInput.value = '#000000';
    updateFooter();

    selectedTransitionEffects = ['fade-in', 'slide-left']; // ØªØ£Ø«ÙŠØ±Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù„Ù„Ø®Ù„Ø·

    // Ù‡Ø°Ù‡ Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ØµØ§Ø¯Ø±
    backgroundMusicElement.volume = musicVolumeControl.value;
    startSlideshow(); // Ø³ÙŠØ­Ø§ÙˆÙ„ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹

    // Ø¥Ø¶Ø§ÙØ© Ø·Ù„Ø§Ø¨ Ø§ÙØªØ±Ø§Ø¶ÙŠÙŠÙ† (Ø¨ØµÙˆØ± Placeholder ÙˆØ£Ø´ÙƒØ§Ù„ Ù…Ø®ØªÙ„ÙØ©)
    addStudent("Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨", "Ø§Ù„Ø¹Ø¨Ø§Ø±Ø© Ø§Ù„ØªØ­ÙÙŠØ²ÙŠØ© | ØµÙˆØ±Ø© Ø§Ø­ØªÙˆØ§Ø¡", "student1.jpg", "circle");
    addStudent("Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨", "Ø¹Ø¨Ø§Ø±Ø© ØªØ­ÙÙŠØ²ÙŠØ© | ØµÙˆØ±Ø© Ù…Ø³ØªØ·ÙŠÙ„Ø© 4*6", "student2.jpg", "rectangle");

    addTextSlide("ØªÙ‡Ø§Ù†ÙŠÙ†Ø§!", "Ø§ØµÙ†Ø¹ Ø¹Ø±Ø¶Ùƒ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…ÙŠ Ø¨Ø¨Ø³Ø§Ø·Ø©. Ù‡Ø°Ù‡ Ø´Ø±ÙŠØ­Ø© Ù†ØµÙŠØ©");
        addTextSlide("ØªÙ‡Ø§Ù†ÙŠÙ†Ø§!", "Ø§ØµÙ†Ø¹ Ø¹Ø±Ø¶Ùƒ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…ÙŠ Ø¨Ø¨Ø³Ø§Ø·Ø©.Ø®Ù„ÙÙŠØ© ØµÙˆØ±Ø© ÙˆØµÙˆØªÙŠØ©. ØµÙˆØ± ÙˆØªØ¹Ù„ÙŠÙ‚ØŒ Ø±Ø³Ø§Ø¦Ù„ Ù†ØµÙŠØ©.");
    addTextSlide("ØªÙ‡Ø§Ù†ÙŠÙ†Ø§!", "Ø§ØµÙ†Ø¹ Ø¹Ø±Ø¶Ùƒ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…ÙŠ Ø¨Ø¨Ø³Ø§Ø·Ø©.Ø®Ù„ÙÙŠØ© Ø¨ØµÙˆØ±Ø© ÙˆØµÙˆØªÙŠØ©. ØµÙˆØ± ÙˆØªØ¹Ù„ÙŠÙ‚ØŒ Ø±Ø³Ø§Ø¦Ù„ Ù†ØµÙŠØ©.");
    addTextSlide(" ÙˆÙ„Ø¯ Ù†Ø³Ø®ØªÙƒ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ù…Ù† Ø¹Ø±Ø¶Ùƒ!", "ØµØ¯Ø± Ù†Ø³Ø®Ø© Ù„Ù„Ø­ÙØ¸ ÙˆØ§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¨Ø§Ø³ØªÙŠØ±Ø§Ø¯Ù‡Ø§.");
    addTextSlide("Ø£Ù„Ù Ù…Ø¨Ø±ÙˆÙƒ Ø§Ù„ØªØ®Ø±Ø¬!", "Ù†ÙØ®Ø± Ø¨Ø¥Ù†Ø¬Ø§Ø²Ø§ØªÙƒÙ… ÙˆÙ†ØªÙ…Ù†Ù‰ Ù„ÙƒÙ… ÙƒÙ„ Ø§Ù„ØªÙˆÙÙŠÙ‚ ÙÙŠ Ù…Ø³ÙŠØ±ØªÙƒÙ… Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©.");

    addImage('photo1.jpg', 'ØªØ¹Ù„Ù… ÙˆØ¥Ù„Ù‰ Ø§Ù„Ø¹Ù„ÙŠØ§Ø¡ ØªÙ‚Ø¯Ù…', 'Ø§Ù„Ø¹Ù„Ù… Ù†ÙˆØ± | ØµÙˆØ±Ø© ÙƒØ§Ù…Ù„Ø©');
    addImage('photo2.jpg', 'Ø§Ù„Ø¹Ù„Ù… Ø·Ø±ÙŠÙ‚Ù†Ø§ Ù„Ù„Ù…Ø³ØªÙ‚Ø¨Ù„', 'Ø§Ù„Ø¹Ù„Ù… Ù†ÙˆØ± | ØµÙˆØ±Ø© ÙƒØ§Ù…Ù„Ø©');

    slideDurationInput.value = 5; // Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
    updateSlidesList();
    displayMessage('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­.');
    startSlideshow(); // Ø¨Ø¯Ø¡ Ø§Ù„Ø¹Ø±Ø¶
}


        // Ø¯Ø§Ù„Ø© Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª Ø¹Ù†Ø¯ Ø£ÙŠ ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø§Ù„ØµÙØ­Ø©
function enableAudio() {
    document.body.addEventListener('click', function() {
        if (backgroundMusicElement.paused && backgroundMusicElement.src) {
            backgroundMusicElement.play()
                .then(() => console.log("ØªÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª Ø¨Ø¹Ø¯ Ø§Ù„ØªÙØ§Ø¹Ù„"))
                .catch(e => console.error("ÙØ´Ù„ ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª:", e));
        }
    }, { once: true }); // ØªØ¹Ù…Ù„ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·
}

        // ÙˆØ¸ÙŠÙØ© Ù„Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ ÙˆØ§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        function clearAllSlides() {
            slides = [];
            currentSlideIndex = 0;
            slideshowContainer.innerHTML = '<div class="slide active flex flex-col justify-center items-center text-gray-400 text-2xl font-bold">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø´Ø±Ø§Ø¦Ø­ Ù„Ø¹Ø±Ø¶Ù‡Ø§. Ø£Ø¶Ù Ø´Ø±Ø§Ø¦Ø­ Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§ØªØŒ Ø­Ù…Ù„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©ØŒ Ø£Ùˆ Ø­Ù…Ù„ Ø¹Ø±Ø¶Ù‹Ø§ Ù…Ù† Ù…Ù„Ù JSON.</div>';
            //localStorage.removeItem('slideshowSettings');//
            updateSlidesList();
            stopSlideshow();
            updateTransitionCheckboxes();;
            showSlide(currentSlideIndex); // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø´Ø±Ø§Ø¦Ø­"
            backgroundImageUrlInput.value = '';
            document.body.style.backgroundImage = 'none';
            backgroundPreview.style.display = 'none';
            musicVolumeControl.value = 0.5;
            volumeValue.textContent = '50%';
            slideDurationInput.value = 5;
            footerTextInput.value = '';
            footerTextColorInput.value = '#FFFFFF';
            footerBgColorInput.value = '#000000';
            slideshowContainer.style.backgroundImage = 'none';
            slideshowContainer.style.backgroundSize = '';
            slideshowContainer.style.backgroundPosition = '';
            slideshowContainer.style.backgroundRepeat = '';
            loadDefaultSettings();
            updateFooter();
            selectedTransitionEffects = ['fade-in']; // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªØ£Ø«ÙŠØ±Ø§Øª

            displayMessage('ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ ÙˆØ§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª.');
        }

        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª Ù„Ù„ØµÙˆØ± ÙˆØ§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰
        function handleFileUpload(fileInput, urlInput, previewElement = null) {
            fileInput.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        urlInput.value = event.target.result; // ØªØ¹ÙŠÙŠÙ† Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© ÙƒÙ€ base64
                        if (previewElement) {
                            previewElement.src = event.target.result;
                            previewElement.style.display = 'block';
                        }
                        if (fileInput.id === 'backgroundMusicFileInput') {
                            backgroundMusicElement.src = event.target.result;
                            backgroundMusicElement.play().catch(e => console.error("ÙØ´Ù„ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø¨Ø¹Ø¯ Ø§Ù„Ø±ÙØ¹:", e));
                        }
                    };
                    reader.readAsDataURL(file);
                } else {
                    urlInput.value = '';
                    if (previewElement) {
                        previewElement.style.display = 'none';
                    }
                    if (fileInput.id === 'backgroundMusicFileInput') {
                        backgroundMusicElement.pause();
                        backgroundMusicElement.src = '';
                    }
                }
            });

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ø±Ø§Ø¨Ø· ÙŠØ¯ÙˆÙŠØ§Ù‹ (Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù†Ù‡Ø§ Ù„Ø§ ØªØ²Ø§Ù„ ØªØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­)
            urlInput.addEventListener('input', () => {
                if (urlInput.value) {
                    if (previewElement) {
                        previewElement.src = urlInput.value;
                        previewElement.style.display = 'block';
                    }
                    if (urlInput.id === 'backgroundMusicUrl') {
                        backgroundMusicElement.src = urlInput.value;
                        backgroundMusicElement.play().catch(e => console.error("ÙØ´Ù„ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø¨Ø¹Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ø±Ø§Ø¨Ø·:", e));
                    }
                } else {
                    if (previewElement) {
                        previewElement.style.display = 'none';
                    }
                    if (urlInput.id === 'backgroundMusicUrl') {
                        backgroundMusicElement.pause();
                        backgroundMusicElement.src = '';
                    }
                }
            });
        }

function updateBackground() {
    backgroundImageUrl="background.jpg"
    const imageUrl = backgroundImageUrlInput.value.trim();
    const file = backgroundFileInput.files[0];

    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            slideshowContainer.style.backgroundImage = `url('${e.target.result}')`;
            slideshowContainer.style.backgroundSize = 'cover';
            slideshowContainer.style.backgroundPosition = 'center';
            slideshowContainer.style.backgroundRepeat = 'no-repeat';
            backgroundPreview.src = e.target.result;
            backgroundPreview.style.display = 'block';
            displayMessage('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¹Ø±Ø¶ Ù…Ù† Ù…Ù„Ù.');
        };
        reader.readAsDataURL(file);
    } else if (imageUrl) {
        slideshowContainer.style.backgroundImage = `url('${imageUrl}')`;
        slideshowContainer.style.backgroundSize = 'cover';
        slideshowContainer.style.backgroundPosition = 'center';
        slideshowContainer.style.backgroundRepeat = 'no-repeat';
        backgroundPreview.src = imageUrl;
        backgroundPreview.style.display = 'block';
        displayMessage('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¹Ø±Ø¶ Ù…Ù† Ø±Ø§Ø¨Ø·.');
    } else {
        slideshowContainer.style.backgroundImage = 'none';
        slideshowContainer.style.backgroundSize = '';
        slideshowContainer.style.backgroundPosition = '';
        slideshowContainer.style.backgroundRepeat = '';
        backgroundPreview.style.display = 'none';
        backgroundPreview.src = '';
        displayMessage('ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¹Ø±Ø¶.');
    }
}

// Ø¯Ø§Ù„Ø© Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ù† ÙƒØ§Ø¦Ù† JS (Ù…Ø³ØªØ®Ø¯Ù…Ø© Ø³ÙˆØ§Ø¡ ÙÙŠ fetch Ø£Ùˆ Ø¹Ù†Ø¯ Ø±ÙØ¹ Ù…Ù„Ù)
function loadSettingsFromObject(importedSettings) {
    if (importedSettings && Array.isArray(importedSettings.slides)) {
        slides = [];
        importedSettings.slides.forEach(s => {
            // Ù„Ùˆ Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ù…Ø§ ÙÙŠÙ‡Ø§ "effect" â†’ Ø¶Ø¹ "fade-in" ÙƒØ§ÙØªØ±Ø§Ø¶ÙŠ
            if (!s.effect || !allTransitionEffects.includes(s.effect)) {
                s.effect = 'fade-in';
            }
            slides.push(s);
        });

        currentSlideIndex = importedSettings.currentSlideIndex || 0;

        // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø®Ù„ÙÙŠØ©
        if (importedSettings.background && importedSettings.background.url) {
            backgroundImageUrlInput.value = importedSettings.background.url;
            updateBackground();
        }

        // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰
        if (importedSettings.music) {
            backgroundMusicUrlInput.value = importedSettings.music.url || '';
            musicVolumeControl.value = importedSettings.music.volume || 0.5;
            volumeValue.textContent = `${Math.round((importedSettings.music.volume || 0.5) * 100)}%`;
            if (importedSettings.music.url) {
                backgroundMusicElement.src = importedSettings.music.url;
            }
        }

        // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ°ÙŠÙŠÙ„
        if (importedSettings.footer) {
            footerTextInput.value = importedSettings.footer.text || '';
            footerTextColorInput.value = importedSettings.footer.textColor || '#FFFFFF';
            footerBgColorInput.value = importedSettings.footer.bgColor || '#000000';
            updateFooter();
        }

        if (importedSettings.slideDuration) {
            slideDurationInput.value = importedSettings.slideDuration;
        }

        if (importedSettings.transitionEffects && Array.isArray(importedSettings.transitionEffects)) {
            selectedTransitionEffects = importedSettings.transitionEffects;
        }

        updateSlidesList();
        showSlide(currentSlideIndex);
        startSlideshow();

        displayMessage('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!');
    } else {
        displayMessage('Ù…Ù„Ù Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù„Ø§ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª ØµØ§Ù„Ø­Ø©.', true);
    }
}


        // Ø¯Ø§Ù„Ø© Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ù† Ù…Ù„Ù ÙŠØ®ØªØ§Ø±Ù‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
function loadSettingsFromFile(event) {
    const file = event.target.files[0];
    if (!file) {
        displayMessage('Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ­Ø¯ÙŠØ¯ Ù…Ù„Ù JSON Ù„Ù„ØªØ­Ù…ÙŠÙ„.', true);
        return;
    }

    const reader = new FileReader();

    reader.onload = (e) => {
        try {
            const importedSettings = JSON.parse(e.target.result);
            loadSettingsFromObject(importedSettings); // âœ… Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ø¹Ø§Ù…Ø©
        } catch (error) {
            console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù„ÙŠÙ„ Ù…Ù„Ù JSON:', error);
            displayMessage('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù. ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù†Ù‡ Ù…Ù„Ù JSON ØµØ§Ù„Ø­.', true);
        }
    };

    reader.onerror = () => {
        displayMessage('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„Ù.', true);
    };

    reader.readAsText(file);
}


        // Ø¯Ø§Ù„Ø© Ù„Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ø¥Ù„Ù‰ Ù…Ù„Ù JSON ÙŠÙ…ÙƒÙ† ØªÙ†Ø²ÙŠÙ„Ù‡
            function exportCurrentSettings() {
                const settingsToSave = {
                    slides: slides,
                    background: {
                        url: backgroundImageUrlInput.value,
                    },
     
                    music: {
                    url: backgroundMusicUrlInput.value,
                    volume: musicVolumeControl.value
                   },

                   footer: {
                   text: footerTextInput.value,
                   textColor: footerTextColorInput.value,
                   bgColor: footerBgColorInput.value
                  },
                   currentSlideIndex: currentSlideIndex,
                    slideDuration: slideDurationInput.value,
                    transitionEffects: selectedTransitionEffects,
                };

                const dataStr = JSON.stringify(settingsToSave, null, 4);
                const blob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'Ø¹Ø±Ø¶_Ø§Ù„Ù†Ø¬Ø§Ø­_Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª.json'; // Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                displayMessage('ØªÙ… Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø±Ø¶ ÙƒÙ…Ù„Ù JSON.');
            }

        // ÙˆØ¸ÙŠÙØ© Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ°ÙŠÙŠÙ„
        function updateFooter() {
            mainFooter.textContent = footerTextInput.value;
            mainFooter.style.color = footerTextColorInput.value;
            mainFooter.style.backgroundColor = footerBgColorInput.value;
            if (footerTextInput.value.trim() === '') {
                mainFooter.style.display = 'none';
            } else {
                mainFooter.style.display = 'block';
            }
        }

        // ÙˆØ¸ÙŠÙØ© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ù…Ù† Ù…Ø±Ø¨Ø¹Ø§Øª Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±
        function getSelectedTransitionEffects() {
            const checkboxes = transitionEffectsContainer.querySelectorAll('input[type="checkbox"]:checked');
            return Array.from(checkboxes).map(cb => cb.value);
        }


        // Ø¯Ø§Ù„Ø© Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØ± Ø¥Ù„Ù‰ base64
async function imageToBase64(url) {
    try {
        const response = await fetch(url);
        const blob = await response.blob();
        return new Promise((resolve) => {
            const reader = new FileReader();
            reader.onloadend = () => resolve(reader.result);
            reader.readAsDataURL(blob);
        });
    } catch (error) {
        console.error('Error converting image:', error);
        return url; // Ø¥Ø°Ø§ ÙØ´Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù†Ø¹ÙˆØ¯ Ù„Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø£ØµÙ„ÙŠ
    }
}

// Ø¯Ø§Ù„Ø© Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØª Ø¥Ù„Ù‰ base64
async function audioToBase64(url) {
    try {
        const response = await fetch(url);
        const blob = await response.blob();
        return new Promise((resolve) => {
            const reader = new FileReader();
            reader.onloadend = () => resolve(reader.result);
            reader.readAsDataURL(blob);
        });
    } catch (error) {
        console.error('Error converting audio:', error);
        return url;
    }
}

// â­ï¸ Ø¯Ø§Ù„Ø© ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©
async function generateFinalVersion() {
    try {
        displayMessage('Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©...');

        // ğŸŸ¢ ØªØ­Ø¶ÙŠØ± ÙƒØ§Ø¦Ù† Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª (config)
        const config = {
            slides: [],
            background: {
                url: backgroundImageUrlInput.value || currentBackgroundUrl,
                isLocal: backgroundFileInput.files.length > 0
            },
            music: {
                url: backgroundMusicUrlInput.value || currentMusicUrl,
                isLocal: backgroundMusicFileInput.files.length > 0,
                volume: musicVolumeControl.value
            },
            footer: {
                text: footerTextInput.value,
                textColor: footerTextColorInput.value,
                bgColor: footerBgColorInput.value
            },
            settings: {
                duration: slideDurationInput.value,
                transitions: selectedTransitionEffects
            }
        };

        // ğŸ”¸ ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ Ø¥Ù„Ù‰ base64 (Ø¥Ù† Ù„Ø²Ù…) + Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¤Ø«Ø±
        for (const slide of slides) {
            const newSlide = { ...slide };

            // â­ï¸ Ø¯Ø¹Ù… Ø§Ù„ØµÙˆØ± Ù„Ø¬Ù…ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø´Ø±Ø§Ø¦Ø­
            if (slide.imageUrl) {
                if (slide.imageUrl.startsWith('http') || slide.imageUrl.startsWith('data:')) {
                    newSlide.imageUrl = await imageToBase64(slide.imageUrl);
                } else {
                    newSlide.imageUrl = slide.imageUrl; // Ù…Ø³Ø§Ø± Ù…Ø­Ù„ÙŠ
                }
            }

            // â­ï¸ Ø¯Ø¹Ù… Ø§Ù„Ù…Ø¤Ø«Ø± Ø§Ù„Ù…Ø­Ø¯Ø¯ (Ø£Ùˆ Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù„Ùˆ ÙØ§Ø±Øº)
            newSlide.effect = slide.effect ? slide.effect : null;

            // âœ… Ø£Ø¶Ù Ø§Ù„Ø´Ø±ÙŠØ­Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø¥Ù„Ù‰ config
            config.slides.push(newSlide);
        }

        // ğŸ”¸ ØªØ­ÙˆÙŠÙ„ Ø®Ù„ÙÙŠØ© Ø¥Ù„Ù‰ base64 Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…Ø­Ù„ÙŠØ©
        if (config.background.url && config.background.isLocal) {
            config.background.url = await imageToBase64(config.background.url);
        }

        // ğŸ”¸ ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø¥Ù„Ù‰ base64 Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…Ø­Ù„ÙŠØ©
        if (config.music.url && config.music.isLocal) {
            config.music.url = await audioToBase64(config.music.url);
        }

        // â­ï¸ ØªÙˆÙ„ÙŠØ¯ HTML Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©
        const htmlContent = generateFinalHTML(config);

        // ğŸ“¥ ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ù„Ù HTML
        const blob = new Blob([htmlContent], { type: 'text/html' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'Ø¹Ø±Ø¶_Ø§Ù„ØªØ®Ø±Ø¬_Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ.html';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);

        displayMessage('ØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!');
    } catch (error) {
        console.error('Error generating final version:', error);
        displayMessage('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©', true);
    }
}

function generateFinalHTML(config) {
    return `
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ø¹Ø±Ø¶ Ø§Ù„ØªØ®Ø±Ø¬ - Ù†Ø³Ø®Ø© Ù†Ù‡Ø§Ø¦ÙŠØ©</title>
    <script src="https://cdn.tailwindcss.com"><\/script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet" />
    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            background-color: #000;
        }

        .slideshow-container {
            position: relative;
            height: 100vh;
            width: 100%;
            background-image: url('${config.background.url}');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            overflow: hidden;
        }

        .slide {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            transition: all 1s ease-in-out;
        }

        .slide.show {
            opacity: 1;
            z-index: 1;
        }

        .slide.text-slide {
            background-color: rgba(0, 0, 0, 0.6);
            padding: 20px;
            text-align: center;
        }

        .slide.text-slide h2 {
            font-size: 3em;
            margin-bottom: 20px;
        }

        .slide.text-slide p {
            font-size: 1.5em;
        }

        .slide.student-slide {
            flex-direction: column;
            text-align: center;
            justify-content: center;
            align-items: center;
            background-color: rgba(0, 0, 0, 0.6);
        }

        .slide.student-slide img {
            display: block;
            margin: 0 auto 20px auto;
            border: 5px solid white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
        }

        .student-image.circle {
            border-radius: 50%;
            width: 250px;
            height: 250px;
            object-fit: cover;
        }

        .student-image.rectangle {
            width: 250px;
            height: 375px;
            object-fit: cover;
        }

        /* âœ… ØªØ¹Ø¯ÙŠÙ„ image-slide Ø§Ù„Ø¬Ø¯ÙŠØ¯ */
        .slide.image-slide {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: rgba(0, 0, 0, 0.6);
            padding: 20px;
        }
        .slide.image-slide img {
    max-width: 60%; /* âœ… Ø¹Ø±Ø¶ Ø£Ù‚ØµÙ‰ 60% */
    max-height: 60vh; /* âœ… Ø§Ø±ØªÙØ§Ø¹ Ø£Ù‚ØµÙ‰ 60% Ù…Ù† Ø§Ù„Ø´Ø§Ø´Ø© */
    height: auto;
    border: 5px solid white;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
    margin-bottom: 10px;
}

        .slide.image-slide .image-title {
            font-size: 2em;
            color: white;
            margin-bottom: 10px;
            text-align: center;
        }

        .slide.image-slide img {
            max-width: 70%;
            height: auto;
            border: 5px solid white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
            margin-bottom: 10px;
        }

        .slide.image-slide .image-caption {
            position: absolute;
            bottom: 50px;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 1.2em;
            color: white;
        }

        /* Ø§Ù„Ù…Ø¤Ø«Ø±Ø§Øª */
        .fade-in { opacity: 0; transition: opacity 1s ease-in-out; }
        .fade-in.show { opacity: 1; }

        .slide-left { transform: translateX(100%); transition: transform 1s ease-in-out, opacity 1s ease-in-out; opacity: 0; }
        .slide-left.show { transform: translateX(0); opacity: 1; }

        .slide-right { transform: translateX(-100%); transition: transform 1s ease-in-out, opacity 1s ease-in-out; opacity: 0; }
        .slide-right.show { transform: translateX(0); opacity: 1; }

        .zoom-in { transform: scale(0.5); transition: transform 1s ease-in-out, opacity 1s ease-in-out; opacity: 0; }
        .zoom-in.show { transform: scale(1); opacity: 1; }

        .rotate-in { transform: rotateY(90deg); transition: transform 1s ease-in-out, opacity 1s ease-in-out; opacity: 0; }
        .rotate-in.show { transform: rotateY(0); opacity: 1; }

        .start-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            color: white;
            text-align: center;
        }

        .start-content h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: gold;
        }

        .start-content button {
            background-color: #38a169;
            color: white;
            font-size: 1.2em;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .start-content button:hover {
            background-color: #2f855a;
        }

        .footer {
            position: fixed;
            bottom: 0;
            width: 100%;
            padding: 12px;
            text-align: center;
            font-size: 1em;
            z-index: 10;
            color: ${config.footer.textColor || '#fff'};
            background-color: ${config.footer.bgColor || '#333'};
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .prev, .next {
            cursor: pointer;
            position: absolute;
            top: 50%;
            width: auto;
            padding: 16px;
            margin-top: -22px;
            color: white;
            font-weight: bold;
            font-size: 18px;
            transition: 0.6s ease;
            border-radius: 0 3px 3px 0;
            user-select: none;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 20;
        }

        .next {
            right: 0;
            border-radius: 3px 0 0 3px;
        }

        .prev {
            left: 0;
            border-radius: 0 3px 3px 0;
        }

        .prev:hover, .next:hover {
            background-color: rgba(0, 0, 0, 0.8);
        }
    </style>
</head>
<body>
    <div class="start-overlay" id="startOverlay">
        <div class="start-content">
            <h1>âœ¨ Ø¨Ø³Ù… Ø§Ù„Ù„Ù‡ Ù†Ø¨Ø¯Ø£ Ø¹Ø±Ø¶Ù†Ø§ âœ¨</h1>
            <button id="startBtn">Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ù„Ø¨Ø¯Ø¡</button>
        </div>
    </div>

    <div class="slideshow-container" id="slideshowContainer"></div>
    <div class="footer" id="mainFooter">${config.footer.text || ''}</div>
    <audio id="backgroundMusic" loop></audio>
    <a class="prev" id="prevBtn">&#10094;</a>
    <a class="next" id="nextBtn">&#10095;</a>

    <script>
        const config = ${JSON.stringify(config, null, 4)};
        let currentSlideIndex = 0;
        let slideshowInterval;
        const container = document.getElementById('slideshowContainer');
        const footer = document.getElementById('mainFooter');
        const music = document.getElementById('backgroundMusic');

        function showSlide(index) {
            container.innerHTML = '';
            if (!config.slides.length) {
                container.innerHTML = '<div style="color:white;text-align:center;padding-top:40vh;font-size:24px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø´Ø±Ø§Ø¦Ø­</div>';
                return;
            }

            const slide = config.slides[index];
            const slideEl = document.createElement('div');

            let effectToApply = 'fade-in';
            if (slide.effect && config.settings.transitions.includes(slide.effect)) {
                effectToApply = slide.effect;
            } else if (config.settings.transitions.length > 0) {
                effectToApply = config.settings.transitions[Math.floor(Math.random() * config.settings.transitions.length)];
            }

            slideEl.classList.add('slide', effectToApply, 'show');

            if (slide.type === 'student') {
                slideEl.classList.add('student-slide');
                let imgClass = (slide.imageShape === 'circle') ? 'student-image circle' : 'student-image rectangle';
                slideEl.innerHTML = \`
                    <img src="\${slide.imageUrl}" alt="\${slide.name}" class="\${imgClass}">
                    <h2 style="margin-top:20px;font-size:2em;">\${slide.name}</h2>
                    <p style="margin-top:10px;max-width:80%;text-align:center;">\${slide.comment}</p>
                \`;
            }
            else if (slide.type === 'text') {
                slideEl.classList.add('text-slide');
                slideEl.innerHTML = \`
                    <h2>\${slide.title}</h2>
                    <p>\${slide.comment}</p>
                \`;
            }
            else if (slide.type === 'image') {
                slideEl.classList.add('image-slide');
                slideEl.innerHTML = \`
                    \${slide.title ? \`<div class="image-title">\${slide.title}</div>\` : ''}
                    <img src="\${slide.imageUrl}" alt="\${slide.title || 'ØµÙˆØ±Ø©'}">
                    \${slide.caption ? \`<div class="image-caption">\${slide.caption}</div>\` : ''}
                \`;
            }

            container.appendChild(slideEl);
        }

        function startSlideshow() {
            clearInterval(slideshowInterval);
            if (config.slides.length > 0) {
                if (config.music.url) {
                    music.src = config.music.url;
                    music.volume = config.music.volume || 0.5;
                    music.play().catch(() => console.log('Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª.'));
                }

                slideshowInterval = setInterval(() => {
                    currentSlideIndex = (currentSlideIndex + 1) % config.slides.length;
                    showSlide(currentSlideIndex);
                }, (config.settings.duration || 5) * 1000);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            footer.textContent = config.footer.text || '';
            footer.style.color = config.footer.textColor || '#fff';
            footer.style.backgroundColor = config.footer.bgColor || '#333';
            showSlide(0);

            document.getElementById('startBtn').addEventListener('click', () => {
                document.getElementById('startOverlay').style.display = 'none';
                startSlideshow();

                if (music.paused && music.src) music.play();
            });

            document.getElementById('prevBtn').addEventListener('click', () => {
                currentSlideIndex = (currentSlideIndex - 1 + config.slides.length) % config.slides.length;
                showSlide(currentSlideIndex);
                resetSlideshowInterval();
            });

            document.getElementById('nextBtn').addEventListener('click', () => {
                currentSlideIndex = (currentSlideIndex + 1) % config.slides.length;
                showSlide(currentSlideIndex);
                resetSlideshowInterval();
            });
        });

        function resetSlideshowInterval() {
            clearInterval(slideshowInterval);
            slideshowInterval = setInterval(() => {
                currentSlideIndex = (currentSlideIndex + 1) % config.slides.length;
                showSlide(currentSlideIndex);
            }, (config.settings.duration || 5) * 1000);
        }
    <\/script>
</body>
</html>
    `;
}

// Ø£Ø¶Ù Ù‡Ø°Ø§ Ù…Ø¹ Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø£Ø®Ø±Ù‰
// âœ… Ø±Ø¨Ø· Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª
handleFileUpload(backgroundFileInput, backgroundImageUrlInput, backgroundPreview);
handleFileUpload(studentFileInput, studentImageUrlInput, studentPreview);
handleFileUpload(imageFileInput, imageUrlInput, imagePreview);
handleFileUpload(backgroundMusicFileInput, backgroundMusicUrlInput);


document.addEventListener('DOMContentLoaded', () => {

        // âœ… ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø´Ø±Ø§Ø¦Ø­
    slides = [];
    currentSlideIndex = 0;

    // âœ… Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
    slideshowContainer.innerHTML = '<div class="slide active flex flex-col justify-center items-center text-gray-400 text-2xl font-bold">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø´Ø±Ø§Ø¦Ø­ Ù„Ø¹Ø±Ø¶Ù‡Ø§. Ø£Ø¶Ù Ø´Ø±Ø§Ø¦Ø­ Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§ØªØŒ Ø­Ù…Ù„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©ØŒ Ø£Ùˆ Ø­Ù…Ù„ Ø¹Ø±Ø¶Ù‹Ø§ Ù…Ù† Ù…Ù„Ù JSON.</div>';

    updateSlidesList();
    stopSlideshow();

    // âœ… ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø®Ù„ÙÙŠØ©
    backgroundImageUrlInput.value = '';
    document.body.style.setProperty('background-image', 'none', 'important');
    document.body.style.backgroundSize = '';
    document.body.style.backgroundPosition = '';
    document.body.style.backgroundRepeat = '';
    backgroundPreview.style.display = 'none';
    backgroundPreview.src = '';

    // âœ… ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…Ø¯Ø©
    slideDurationInput.value = 5;

    // âœ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ØµÙˆØª
    enableAudio();

    // âœ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
    loadDefaultSettings();

    // âœ… Ø±Ø¨Ø· Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙˆØ§Ù„Ø£Ø­Ø¯Ø§Ø«:

    startSlideshowBtn.addEventListener('click', () => {
        if (slides.length > 0) {
            currentSlideIndex = 0;
            showSlide(currentSlideIndex);
            startSlideshow();

            if (backgroundMusicElement.src) {
                backgroundMusicElement.currentTime = 0;
                backgroundMusicElement.play().catch(e => {
                    displayMessage('ÙØ´Ù„ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„ ÙŠØ¯ÙˆÙŠØ§Ù‹.', true);
                    console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰:", e);
                });
            }

            displayMessage('ØªÙ… Ø¨Ø¯Ø¡ Ø§Ù„Ø¹Ø±Ø¶ ÙˆØ§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰.');
        } else {
            displayMessage('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø´Ø±Ø§Ø¦Ø­ Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø¹Ø±Ø¶. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø´Ø±Ø§Ø¦Ø­ Ø£ÙˆÙ„Ø§Ù‹.', true);
        }
    });

    stopSlideshowBtn.addEventListener('click', () => {
        clearInterval(slideshowInterval);
        backgroundMusicElement.pause();
        displayMessage('ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¹Ø±Ø¶ ÙˆØ§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰.');
    });

    settingsToggleBtn.addEventListener('click', () => {
        settingsPanel.classList.toggle('open');
    });

    document.getElementById('generateFinalBtn').addEventListener('click', generateFinalVersion);

addStudentBtn.addEventListener('click', () => {
    const name = studentNameInput.value.trim();
    const comment = studentCommentInput.value.trim();
    const imageUrl = studentImageUrlInput.value.trim();
    const imageShape = studentImageShapeInput.value;
    const editIdx = document.getElementById('editIndex').value;

    if (name && imageUrl) {
        const newSlide = {
            type: 'student',
            name: name,
            comment: comment,
            imageUrl: imageUrl,
            imageShape: imageShape,
            effect: selectedTransitionEffects[0]
        };

        if (editIdx !== '') {
            slides[editIdx] = newSlide;
            displayMessage(`ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ø±ÙŠØ­Ø© Ø±Ù‚Ù… ${parseInt(editIdx) + 1}.`);
        } else {
            slides.push(newSlide);
            displayMessage('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙŠØ­Ø© Ø·Ø§Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­.');
        }

        // ØªÙ†Ø¸ÙŠÙ:
        clearEditMode();
        studentNameInput.value = '';
        studentCommentInput.value = '';
        studentImageUrlInput.value = '';
        studentFileInput.value = '';
        studentPreview.style.display = 'none';

        updateSlidesList();
    } else {
        displayMessage('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ ÙˆØ±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©.', true);
    }
});


addTextSlideBtn.addEventListener('click', () => {
    const title = textTitleInput.value.trim();
    const comment = textCommentInput.value.trim();
    const editIdx = document.getElementById('editIndex').value;

    if (title || comment) {
        const newSlide = {
            type: 'text',
            title: title,
            comment: comment,
            effect: selectedTransitionEffects[0]
        };

        if (editIdx !== '') {
            slides[editIdx] = newSlide;
            displayMessage(`ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ø±ÙŠØ­Ø© Ø±Ù‚Ù… ${parseInt(editIdx) + 1}.`);
        } else {
            slides.push(newSlide);
            displayMessage('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙŠØ­Ø© Ù†ØµÙŠØ© Ø¨Ù†Ø¬Ø§Ø­.');
        }

        // ØªÙ†Ø¸ÙŠÙ:
        clearEditMode();
        textTitleInput.value = '';
        textCommentInput.value = '';

        updateSlidesList();
    } else {
        displayMessage('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† Ø£Ùˆ Ù†Øµ Ù„Ù„Ø´Ø±ÙŠØ­Ø©.', true);
    }
});

addImageBtn.addEventListener('click', () => {
    const url = imageUrlInput.value.trim();
    const caption = imageCaptionInput.value.trim();
    const imgTitle = imageTitleInput.value.trim();
    const editIdx = document.getElementById('editIndex').value;

    if (url) {
        const newSlide = {
            type: 'image',
            imageUrl: url,
            caption: caption,
            title: imgTitle,
            effect: selectedTransitionEffects[0]
        };

        if (editIdx !== '') {
            slides[editIdx] = newSlide;
            displayMessage(`ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ø±ÙŠØ­Ø© Ø±Ù‚Ù… ${parseInt(editIdx) + 1}.`);
        } else {
            slides.push(newSlide);
            displayMessage('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙŠØ­Ø© ØµÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­.');
        }

        // ØªÙ†Ø¸ÙŠÙ:
        clearEditMode();
        imageUrlInput.value = '';
        imageCaptionInput.value = '';
        imageTitleInput.value = '';
        imageFileInput.value = '';
        imagePreview.style.display = 'none';

        updateSlidesList();
    } else {
        displayMessage('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©.', true);
    }
});

    pauseMusicBtn.addEventListener('click', () => {
        backgroundMusicElement.pause();
    });

    playMusicBtn.addEventListener('click', () => {
        if (backgroundMusicElement.src) {
            backgroundMusicElement.play().catch(e => {
                displayMessage('ÙØ´Ù„ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰. Ù‚Ø¯ ÙŠÙƒÙˆÙ† Ø§Ù„Ù…ØªØµÙØ­ ÙŠÙ…Ù†Ø¹ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ.', true);
                console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰:", e);
            });
        } else {
            displayMessage('Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ø§Ø¨Ø· Ù„Ù…Ø§Ø¯Ø© ØµÙˆØªÙŠØ©. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø±Ø§Ø¨Ø· Ø£Ùˆ Ø±ÙØ¹ Ù…Ù„Ù.', true);
        }
    });

    musicVolumeControl.addEventListener('input', () => {
        backgroundMusicElement.volume = musicVolumeControl.value;
        volumeValue.textContent = `${Math.round(backgroundMusicElement.volume * 100)}%`;
    });

    updateFooterBtn.addEventListener('click', () => {
        updateFooter();
        displayMessage('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ°ÙŠÙŠÙ„.');
    });

    loadDefaultsBtn.addEventListener('click', loadDefaultSettings);
    clearAllBtn.addEventListener('click', clearAllSlides);
    exportSettingsBtn.addEventListener('click', exportCurrentSettings);
    loadFromFileBtn.addEventListener('click', () => loadFileInput.click());
    loadFileInput.addEventListener('change', loadSettingsFromFile);
    slideDurationInput.addEventListener('change', startSlideshow);
    updateBackgroundBtn.addEventListener('click', updateBackground);

});

    </script>
</body>
</html>
